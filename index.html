<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TURNING PAGES: SERIES - Crowdfunding Campaign</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <header class="hero">
    <div class="overlay">
      <h1>TURNING PAGES</h1>
      <p class="tagline">A powerful series of survival, fear, and resistance</p>
      <a href="#donate" class="btn">Support the Series</a>
    </div>
  </header>

  <section class="about">
    <h2>About the Series</h2>
    <p>
      "TURNING PAGES" tells the story of a forgotten rebellion, hidden deep in the jungles of Africa. 
      As secrets emerge, communities are forced to face their past and fight for their future. 
      This TV series blends historical fiction, suspense, and Afro-realism in a raw, immersive journey.
    </p>
  </section>

  <!-- ✅ Fixed: Single funding section -->
  <section class="funding" id="donate">
    <h2>Funding Progress</h2>
    <div class="progress-bar">
      <div class="progress" style="width: 0%;"></div>
    </div>
    <p class="funding-text">Raised: €600 / Goal: €80,000</p>
    <a href="https://payment-links.mollie.com/payment/Ei7TmJKyZNhUHdJXGhgPh" target="_blank" class="btn donate-btn">
      Donate via iDEAL / Credit Card
    </a>
    <p class="secure-note">Payments securely processed via Mollie</p>
  </section>

  <section class="rewards">
    <h2>Supporter Rewards</h2>
    <ul>
      <li>€10 - Shout-out on our website</li>
      <li>€50 - Early access to episode one</li>
      <li>€100 - Your name in the credits</li>
      <li>€500 - Producer credit + behind-the-scenes pass</li>
    </ul>
  </section>

  <section class="chart-section">
  <h2>Live Donation Volatility</h2>
  <p id="live-total" style="font-size: 2em; color: #4caf50;">€0</p>
  <canvas id="crowdChart"></canvas>
</section>

  <section class="gallery">
    <h2>Behind the Scenes</h2>
    <img src="landing-image.jpg" alt="Afro Rainfall Poster" />
  </section>

<!--episode section--> 

<section class="episodes">
  <h2>Fund Individual Episodes</h2>

  <!-- Repeat for each episode -->
  <div class="episode">
    <img src="turning-pages-01.png" alt="Episode 1">
    <h3>Episode 1: Shadows of Desire</h3>
    <p>In the jungle's depths, a forbidden love threatens to undo a fragile alliance.</p>
    <a href="episode1-signin.html" class="btn">Fund This Episode</a>
  </div>

  <div class="episode">
    <img src="turning-pages-02.png" alt="Episode 2">
    <h3>Episode 2: Whispers in the Canopy</h3>
    <p>Mysterious voices echo from the trees as a secret resistance builds in silence.</p>
    <a href="episode2-signin.html" class="btn">Fund This Episode</a>
  </div>

  <div class="episode">
    <img src="turning-pages-03.png" alt="Episode 3">
    <h3>Episode 3: The Betrayer's Path</h3>
    <p>An unexpected betrayal sends the mission into chaos and tests loyalties.</p>
    <a href="episode3-signin.html" class="btn">Fund This Episode</a>
  </div>

  <div class="episode">
    <img src="turning-pages-04.png" alt="Episode 4">
    <h3>Episode 4: Jungle Reckoning</h3>
    <p>As the past resurfaces, choices made in blood must be answered for in kind.</p>
    <a href="episode4-signin.html" class="btn">Fund This Episode</a>
  </div>

  <div class="episode">
    <img src="turning-pages-05.png" alt="Episode 5">
    <h3>Episode 5: Rainfall Confessions</h3>
    <p>In a downpour of emotions, truths are confessed that change everything.</p>
    <a href="episode5-signin.html" class="btn">Fund This Episode</a>
  </div>

  <div class="episode">
    <img src="turning-pages-06.png" alt="Episode 6">
    <h3>Episode 6: Echoes of War</h3>
    <p>A confrontation ignites rebellion and exposes the cracks in fragile alliances.</p>
    <a href="episode6-signin.html" class="btn">Fund This Episode</a>
  </div>

  <div class="episode">
    <img src="turning-pages-07.png" alt="Episode 7">
    <h3>Episode 7: The Last Ritual</h3>
    <p>An ancient ceremony may be the last hope—or final curse—of the village.</p>
    <a href="episode7-signin.html" class="btn">Fund This Episode</a>
  </div>

  <div class="episode">
    <img src="turning-pages-08.png" alt="Episode 8">
    <h3>Episode 8: Breaking the Silence</h3>
    <p>The final uprising begins with a single scream that echoes through generations.</p>
    <a href="episode8-signin.html" class="btn">Fund This Episode</a>
  </div>
</section>
<section class="terms">
  <h2>Investment Agreement</h2>
  <p>By funding an episode, you agree to the <a href="#">Rules of Business Funding</a>.</p>
  <p><strong>Investor Benefit:</strong> You will receive 5% profit share of the episode revenue, proportional to your investment, as outlined in the official agreement sent upon funding.</p>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
async function fetchDonations() {
  const res = await fetch('http://localhost:5000/api/donations');
  return res.json();
}

function formatDate(dateStr) {
  // Mollie gives UTC ISO, convert to date only
  const d = new Date(dateStr);
  return `${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()}`;
}

async function updateChart() {
  const data = await fetchDonations();

  // Aggregate donations per day (or per hour if you want more "volatility")
  const donationsByDate = {};
  let total = 0;
  data.forEach(d => {
    const date = formatDate(d.paidAt || d.createdAt || d.createdDatetime);
    const amount = parseFloat(d.amount.value);
    total += amount;
    donationsByDate[date] = (donationsByDate[date] || 0) + amount;
  });

  document.getElementById('live-total').innerText = `€${total.toLocaleString()}`;

  const labels = Object.keys(donationsByDate);
  const amounts = Object.values(donationsByDate);

  if (window.crowdChartInstance) {
    // Update existing chart
    window.crowdChartInstance.data.labels = labels;
    window.crowdChartInstance.data.datasets[0].data = amounts;
    window.crowdChartInstance.update();
  } else {
    // Create new chart
    const ctx = document.getElementById('crowdChart').getContext('2d');
    window.crowdChartInstance = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: 'Donations (€) per day',
          data: amounts,
          borderWidth: 2
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  }
}

// Update chart every 10 seconds (live!)
setInterval(updateChart, 10000);
updateChart();
</script>


<!-- end of episode section -->
  <footer>
    <p>&copy; 2025 TURNING PAGES TV SERIES | Contact: info@turningpages.com</p>
  </footer>

  

  <script src="script.js"></script>

  
</body>
</html>


